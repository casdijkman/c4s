@use '../../functions';
@use '../../variables';
@use 'sass:map';

// Add auto as a level for margins with -auto suffix
// NB: Margin-all and margin-vertical rules do not include the '-auto' suffix
$margin-spacer-levels: map.merge(variables.$spacer-levels, ('-auto': auto));

$margins: (
  m:  margin,
  mt: margin-top,
  mr: margin-right,
  mb: margin-bottom,
  ml: margin-left
);

@mixin margin($media-suffix) {
  @each $name, $property in $margins {
    $levels: ();

    @if $property == margin {
      $levels: variables.$spacer-levels;
    } @else {
      $levels: $margin-spacer-levels;
    }

    @each $level, $value in $levels {
      #{functions.construct-class-name(variables.$global-prefix, $name + $level, $media-suffix)} {
        #{$property}: $value;
      }
    }
  }

  /*
     MARGIN HORIZONTAL
   */
  @each $level, $value in $margin-spacer-levels {
    #{functions.construct-class-name(variables.$global-prefix, mh + $level, $media-suffix)} {
      margin-left: $value;
      margin-right: $value;
    }
  }

  /*
     MARGIN VERTICAL
   */
  @each $level, $value in variables.$spacer-levels {
    #{functions.construct-class-name(variables.$global-prefix, mv + $level, $media-suffix)} {
      margin-top: $value;
      margin-bottom: $value;
    }
  }
}
